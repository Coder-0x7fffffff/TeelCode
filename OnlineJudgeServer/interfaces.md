# OJ接口 v0.2

## 接口说明

返回值为**json**数据，输入参数中**加粗为必填参数**，*斜线为可选参数*
token也许可以不用带着(会在请求头中找)
暂时没有添加管理员

## 更新日志

<font color="#00ff00">+登陆时会返回一个token，所有非类登陆或注册的操作都必须带上token</font>
<font color="#00ff00">+接口参数中的id改为token</font>
<font color="#00ff00">+增加了修改密码接口</font>

## 登陆相关

### 登陆(Login)

#### 输入

| 参数    | 类型   | 说明     |
| ------- | ------ | -------- |
| **id**  | 字符串 | 用户id   |
| **pwd** | 字符串 | 用户密码 |

#### 返回值

| 参数   | 类型     | 说明         |
| ------ | -------- | ------------ |
| result | 布尔类型 | 登陆是否成功 |
| token | 字符串 | 用户的token, 若登陆失败则为空 |

### 注册(Register)

#### 输入

| 参数    | 类型   | 说明     |
| ------- | ------ | -------- |
| **id**  | 字符串 | 用户id   |
| **pwd** | 字符串 | 用户密码 |
| **problem**  | 字符串 | 安全问题   |
| **answer** | 字符串 | 问题答案 |

#### 返回值

| 参数   | 类型     | 说明         |
| ------ | -------- | ------------ |
| result | 布尔类型 | 注册是否成功 |

## 用户相关

### 创建用户(NewUser)

#### 输入

| 参数     | 类型        | 说明     |
| -------- | ----------- | -------- |
| **token** | 字符串|用户的token|
| **name** | 字符串      | 用户昵称 |
| *sex*    | 整型        | 用户性别 |
| *dscp*  | 字符串/文本 | 用户描述 |

#### 返回值

| 参数   | 类型     | 说明         |
| ------ | -------- | ------------ |
| result | 布尔类型 | 创建是否成功 |

###  更新用户信息(UpdateUser)

#### 输入

| 参数   | 类型        | 说明     |
| ------ | ----------- | -------- |
| **token** | 字符串  | 用户的token   |
| *name* | 字符串      | 用户昵称 |
| *sex*  | 整型        | 用户性别 |
| *dscp* | 字符串/文本 | 用户描述 |

#### 返回值

| 参数   | 类型     | 说明         |
| ------ | -------- | ------------ |
| result | 布尔类型 | 修改是否成功 |

### 修改密码(AlterPassword)

#### 输入

| 参数   | 类型        | 说明     |
| ------ | ----------- | -------- |
| **token** | 字符串  | 用户的token   |
| **answer** | 字符串 | 安全问题答案 |
| **newpwd** | 字符串  | 用户的新密码   |

#### 返回值

| 参数   | 类型     | 说明         |
| ------ | -------- | ------------ |
| result | 布尔类型 | 修改是否成功 |

## 题目相关

### 获取题目列表(All)

#### 输入

| 参数       | 类型 | 说明            |
| ---------- | ---- | --------------- |
| **page**   | 整型 | 第几页(从1开始) |
| **offset** | 整型 | 页大小          |

#### 返回值

| 参数   | 类型     | 说明             |
| ------ | -------- | ---------------- |
| result | 题目数组 | 获取到的题目数组 |

##### 数组结构说明

每个元素都包含Problem和Classification两个字段(Classification可能为空,这意味着这个题目没有分类)

{ Problem:{pid,pname,pdifficulty,ppass,psubmit,pdscp,pinputs,poutputs}, classification:{cid,cname} }

字段具体含义同数据库表中字段

### 添加题目(AddProblem)

| 参数    |   类型   |  说明    |
| ---- | ---- | ---- |
| **id** | 整型 | 题目编号 |
| **name** | 字符串 | 题目名称 |
| **difficulty** | 整型 | 题目难度 |
| **dscp** | 字符串 | 题目描述 |
| **inputs** | 字符串 | 题目输入 |
| **outputs** | 字符串 | 题目输出 |
| **classification** | 字符串 | 题目分类 |

##### 题目分类说明

各个分类之间用英文逗号隔开,比如 链表,数组,...,树

#### 返回值

| 参数   | 类型   | 说明         |
| ------ | ------ | ------------ |
| result | 布尔型 | 添加是否成功 |

### 获取所有分类(GetClassifications)

#### 输入

无

#### 返回值

| 参数   | 类型 | 说明       |
| ------ | ---- | ---------- |
| result | 数组 | 所有的分类 |

##### 数组结构说明

数组中每个元素为Classification,定义同数据库的Classification表

### 添加分类(AddClassification)

#### 输入

| 参数     | 类型   | 说明         |
| -------- | ------ | ------------ |
| **id**   | 整型   | 该分类的编号 |
| **name** | 字符串 | 该分类的名字 |

#### 返回值

| 参数   | 类型   | 说明         |
| ------ | ------ | ------------ |
| result | 布尔型 | 添加是否成功 |

### 获取所有难度(GetDifficulties)(0=简单，1=中等，2=困难)

#### 输入

无

#### 返回值

| 参数   | 类型 | 说明       |
| ------ | ---- | ---------- |
| result | 数组 | 所有的难度 |

0=简单，1=中等，2=困难

## 提交相关

### 提交代码(Submit)

#### 输入



#### 返回值

